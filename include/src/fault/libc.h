/**
	fault C Preprocessor interfaces and macros.
*/
#ifndef _FAULT_LIBC_H_
#define _FAULT_LIBC_H_

#define _CPP_QUOTE(x) #x
#define STRING_FROM_IDENTIFIER(X) _CPP_QUOTE(X)
#define CONCAT_IDENTIFIER(X, Y) X##Y

#define PRODUCT_ARCHITECTURE_STR STRING_FROM_IDENTIFIER(PRODUCT_ARCHITECTURE)

#define MODULE_QNAME_STR STRING_FROM_IDENTIFIER(MODULE_QNAME)
#define MODULE_BASENAME_STR STRING_FROM_IDENTIFIER(MODULE_BASENAME)
#define MODULE_PACKAGE_STR STRING_FROM_IDENTIFIER(MODULE_PACKAGE)
#define MODULE_QPATH(NAME) MODULE_QNAME_STR "." NAME

#define FACTOR_QNAME_STR STRING_FROM_IDENTIFIER(FACTOR_QNAME)
#define FACTOR_BASENAME_STR STRING_FROM_IDENTIFIER(FACTOR_BASENAME)
#define FACTOR_PACKAGE_STR STRING_FROM_IDENTIFIER(FACTOR_PACKAGE)
#define FACTOR_PATH(NAME) FACTOR_QNAME_STR "." NAME

#define F_PURPOSE_STR STRING_FROM_IDENTIFIER(F_PURPOSE)
#define F_PURPOSE_OPTIMAL_ID 1
#define F_PURPOSE_DEBUG_ID 2

#define F_PURPOSE_PROFILING_ID 4
#define F_PURPOSE_TEST_ID 5

#define F_PURPOSE_COVERAGE_ID 9
#define F_PURPOSE_METRICS_ID 10

#define F_TRACE(y) 0

#define FV_TEST(y) (F_PURPOSE_ID == F_PURPOSE_TEST_ID)
#define FV_DEBUG(y) (F_PURPOSE_ID == F_PURPOSE_DEBUG_ID && SUBSCRIBE_##y)
#define FV_OPTIMAL(y) (F_PURPOSE_ID == F_PURPOSE_OPTIMAL_ID)
#define FV_METRICS(y) (F_PURPOSE_ID == F_PURPOSE_METRICS_ID)

#ifndef F_PURPOSE_ID
	#warning Compilation driver was not given a F_PURPOSE_ID preprocessor definition
	#warning Presuming 'optimal' build.
	#define F_PURPOSE_ID F_PURPOSE_OPTIMAL_ID
#endif

#endif
